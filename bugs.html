<!DOCTYPE html>
<html lang ="en">
<head>
    <link rel="stylesheet" type = "text/css" href="main.css">
    <title>Java Bug Tracker ++ Bugs</title>
    <script>
      var elements = [];
      var boxNum = 0;

      window.onload = function() {
          if(JSON.parse(localStorage.getItem("elements")) != null) {
            elements = JSON.parse(localStorage.getItem("elements"));
            console.log(elements);
            display();
          }
      }

    function display() {
      console.log(elements);
      for(var i = 0; i < elements.length; i++) {
        var table = document.getElementById("myTable");
        var row = document.createElement("tr");
        var td1 = document.createElement("td");
        var td2 = document.createElement("td");
        var td3 = document.createElement("td"); 
        var td4 = document.createElement("td"); 

        td1.innerHTML = elements[i];
        td2.innerHTML = elements[++i];
        td3.innerHTML = elements[++i];
        td4.innerHTML = "<button class = 'xbutton' onclick= del(" + boxNum + ") > X </button>";
        boxNum+=1;

        row.appendChild(td1);
        row.appendChild(td2);
        row.appendChild(td3);
        row.appendChild(td4);

        table.children[0].appendChild(row);
      }
    }  

    function del(index) {
      console.log(index);
      elements.splice((index * 3), 3);
      if (localStorage.getItem("elements") == null) {
        localStorage.setItem("elements", JSON.stringify(elements));
      } else {
        localStorage.setItem("elements", JSON.stringify(elements));
      }
      location.reload();
      display();
    }

    function newBug() {

    elements.push(document.getElementById("titleInput").value);
    localStorage.setItem("elements", JSON.stringify(elements));
    elements.push(document.getElementById("descInput").value);
    localStorage.setItem("elements", JSON.stringify(elements));
    elements.push(document.getElementById("priorityInput").value);
    localStorage.setItem("elements", JSON.stringify(elements));
    location.reload();
    display();
}


  
    </script>
</head>
<body>
    <div class="navbar">
        <a href ="index.html">Home</a>
        <a href ="bugs.html">Bugs</a>
        <a href ="devs.html">Developers</a>
    </div>
        <div class="column">
          <h4>Bugs</h4>
          <div class="background">
              <table class="tablez" id = "myTable">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Description</th>
                    <th>Priority</th>
                   </tr>
                </thead> 
              </table>
          </div>
        </div>
        
        <div class="formColumn">
          <h4>Bug Report Form</h4>
          <div class="background">
          <form name="bugForm">
                <div class="space">
                  <label>Name</label>
                  <input name="title" id = "titleInput" type="text">
                </div>
              
                <div class="space">
                  <label>Description</label>
                  <input name="desciption" id = "descInput" type="text">
                </div>
                
                <div class="space">
                  <label>Priority</label>
                  <select id = "priorityInput">
                    <option>Very High</option>
                    <option>High</option>
                    <option>Medium</option>
                    <option>Low</option>
                    <option>Very Low</option>
                  </select>
                </div>

                <div class="space">
                    <button type ="button" onclick = "newBug()" class ="submit">Submit Bug</button>
                </div>
          </form>
          </div>
        </div>
</body>
</html>