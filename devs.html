<!DOCTYPE html>
<html lang ="en">
<head>
    <link rel="stylesheet" type = "text/css" href="main.css">
    <title>Java Bug Tracker ++ Bugs</title>
     <script>
       var developer = [];
       var boxNums = 0;

window.onload = function() {
    if(JSON.parse(localStorage.getItem("developer")) != null) {
      developer = JSON.parse(localStorage.getItem("developer"));
      console.log(developer);
      display();
    }
}

function display() {
for(var i = 0; i < developer.length; i++) {
  var table = document.getElementById("myTable");
  var row = document.createElement("tr");
  var td1 = document.createElement("td");
  var td2 = document.createElement("td"); 
  var td3 = document.createElement("td");

  td1.innerHTML = developer[i];
  td2.innerHTML  = developer[++i];
  td3.innerHTML = "<button class = 'xbutton' onclick= del(" + boxNums + ")> x </button>";
  boxNums+=1;

  row.appendChild(td1);
  row.appendChild(td2);
  row.appendChild(td3);

  table.children[0].appendChild(row);
  }
}

function del(index) {
      console.log(index);
      developer.splice((index * 2), 2);
      if (localStorage.getItem("developer") == null) {
        localStorage.setItem("developer", JSON.stringify(developer));
      } else {
        localStorage.setItem("developer", JSON.stringify(developer));
      }
      location.reload();
      display();
    }

    function newDev() {

    developer.push(document.getElementById("fName").value);
    localStorage.setItem("developer", JSON.stringify(developer));
    developer.push(document.getElementById("sName").value);
    localStorage.setItem("developer", JSON.stringify(developer));
    location.reload();
    display();
}
  
    </script>
</head>
<body>
<div class="navbar">
        <a href ="index.html">Home</a>
        <a href ="bugs.html">Bugs</a>
        <a href= "devs.html">Developers</a>
    </div>
    <div class="column">
          <h4>Developers</h4>
          <div class="background">
              <table class="tablez" id = "myTable">
                <thead>
                  <tr>
                    <th>First Name</th>
                    <th>Second Name</th>
                   </tr>
                </thead> 
              </table>
          </div>
        </div>

        <div class="formColumn">
          <h4>Developers Form</h4>
          <div class="background">
          <form name="bugForm">
                <div class="space">
                  <label>First Name</label>
                  <input name="title" id = "fName" type="text">
                </div>
              
                <div class="space">
                  <label>Second Name</label>
                  <input name="desciption" id = "sName" type="text">
                </div>
                
                <div class="space">
                    <button type ="button" onclick = "newDev()" class ="submit">Add Developer</button>
                </div>
          </form>
          </div>
        </div>